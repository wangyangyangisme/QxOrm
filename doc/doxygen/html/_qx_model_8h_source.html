<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>QxOrm: C:/Dvlp/_Perso/QxOrm/include/QxModelView/QxModel.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo_qxorm.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QxOrm
   &#160;<span id="projectnumber">1.4.4</span>
   </div>
   <div id="projectbrief">C++ Object Relational Mapping library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_qx_model_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">QxModel.h</div>  </div>
</div>
<div class="contents">
<a href="_qx_model_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">**</span>
<a name="l00003"></a>00003 <span class="comment">** http://www.qxorm.com/</span>
<a name="l00004"></a>00004 <span class="comment">** Copyright (C) 2013 Lionel Marty (contact@qxorm.com)</span>
<a name="l00005"></a>00005 <span class="comment">**</span>
<a name="l00006"></a>00006 <span class="comment">** This file is part of the QxOrm library</span>
<a name="l00007"></a>00007 <span class="comment">**</span>
<a name="l00008"></a>00008 <span class="comment">** This software is provided &#39;as-is&#39;, without any express or implied</span>
<a name="l00009"></a>00009 <span class="comment">** warranty. In no event will the authors be held liable for any</span>
<a name="l00010"></a>00010 <span class="comment">** damages arising from the use of this software</span>
<a name="l00011"></a>00011 <span class="comment">**</span>
<a name="l00012"></a>00012 <span class="comment">** Commercial Usage</span>
<a name="l00013"></a>00013 <span class="comment">** Licensees holding valid commercial QxOrm licenses may use this file in</span>
<a name="l00014"></a>00014 <span class="comment">** accordance with the commercial license agreement provided with the</span>
<a name="l00015"></a>00015 <span class="comment">** Software or, alternatively, in accordance with the terms contained in</span>
<a name="l00016"></a>00016 <span class="comment">** a written agreement between you and Lionel Marty</span>
<a name="l00017"></a>00017 <span class="comment">**</span>
<a name="l00018"></a>00018 <span class="comment">** GNU General Public License Usage</span>
<a name="l00019"></a>00019 <span class="comment">** Alternatively, this file may be used under the terms of the GNU</span>
<a name="l00020"></a>00020 <span class="comment">** General Public License version 3.0 as published by the Free Software</span>
<a name="l00021"></a>00021 <span class="comment">** Foundation and appearing in the file &#39;license.gpl3.txt&#39; included in the</span>
<a name="l00022"></a>00022 <span class="comment">** packaging of this file. Please review the following information to</span>
<a name="l00023"></a>00023 <span class="comment">** ensure the GNU General Public License version 3.0 requirements will be</span>
<a name="l00024"></a>00024 <span class="comment">** met : http://www.gnu.org/copyleft/gpl.html</span>
<a name="l00025"></a>00025 <span class="comment">**</span>
<a name="l00026"></a>00026 <span class="comment">** If you are unsure which license is appropriate for your use, or</span>
<a name="l00027"></a>00027 <span class="comment">** if you have questions regarding the use of this file, please contact :</span>
<a name="l00028"></a>00028 <span class="comment">** contact@qxorm.com</span>
<a name="l00029"></a>00029 <span class="comment">**</span>
<a name="l00030"></a>00030 <span class="comment">****************************************************************************/</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#ifndef _QX_MODEL_H_</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define _QX_MODEL_H_</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#pragma once</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &lt;<a class="code" href="_ix_model_8h.html" title="Interface to manage Qt model/view architecture with classes registered into QxOrm context (Qt widgets...">QxModelView/IxModel.h</a>&gt;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;<a class="code" href="_qx_model_row_compare_8h.html" title="Functor used to provide sort feature for all models based on qx::IxModel interface (please note that ...">QxModelView/QxModelRowCompare.h</a>&gt;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;<a class="code" href="_qx_collection_8h.html" title="QxOrm container (keep insertion order + quick access by index + quick access by key)">QxCollection/QxCollection.h</a>&gt;</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;<a class="code" href="_qx_class_8h.html" title="Concrete class registered into QxOrm context.">QxRegister/QxClass.h</a>&gt;</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="preprocessor">#include &lt;<a class="code" href="get__primary__key_8h.html" title="qx::trait::get_primary_key&lt;T&gt;::type : return primary key type of T, by default primary key is long ty...">QxTraits/get_primary_key.h</a>&gt;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &lt;<a class="code" href="is__qx__registered_8h.html" title="qx::trait::is_qx_registered&lt;T&gt;::value : return true if T is registered into QxOrm context to provide ...">QxTraits/is_qx_registered.h</a>&gt;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &lt;<a class="code" href="is__valid__primary__key_8h.html" title="qx::trait::is_valid_primary_key&lt;T&gt;(const T &amp; t) : return true if t can be a valid primary key to be i...">QxTraits/is_valid_primary_key.h</a>&gt;</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="preprocessor">#include &lt;<a class="code" href="_qx_dump_8h.html" title="Dump all classes registered into QxOrm context using XML and JSON serialization engine.">QxSerialize/QxDump.h</a>&gt;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;<a class="code" href="_qx_clone_8h.html" title="Clone all classes registered into QxOrm context using QxOrm library serialization engine...">QxSerialize/QxClone.h</a>&gt;</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#ifndef _QX_NO_JSON</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="_qx_serialize_q_json___qx_collection_8h.html" title="Provide a Qt QJson serialization method (save/load) for type qx::QxCollection&lt;Key, Value&gt;">QxSerialize/QJson/QxSerializeQJson_QxCollection.h</a>&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &lt;<a class="code" href="_qx_serialize_q_json_8h.html" title="Provide a serialization engine with Qt QJson classes (this feature requires Qt5)">QxSerialize/QxSerializeQJson.h</a>&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#endif // _QX_NO_JSON</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a>00065 <span class="keyword">namespace </span>qx {
<a name="l00066"></a>00066 <span class="keyword">namespace </span>model_view {
<a name="l00067"></a>00067 <span class="keyword">namespace </span>detail {
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> M&gt; <span class="keyword">struct </span>QxNestedModel;
<a name="l00070"></a>00070 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> M&gt; <span class="keyword">struct </span>QxNestedModel_Generic;
<a name="l00071"></a>00071 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> M&gt; <span class="keyword">struct </span>QxNestedModel_Container;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 } <span class="comment">// namespace detail</span>
<a name="l00074"></a>00074 } <span class="comment">// namespace model_view</span>
<a name="l00075"></a>00075 } <span class="comment">// namespace qx</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="keyword">namespace </span>qx {
<a name="l00078"></a>00078 
<a name="l00162"></a>00162 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> B = qx::IxModel&gt;
<a name="l00163"></a><a class="code" href="classqx_1_1_qx_model.html">00163</a> <span class="keyword">class </span><a class="code" href="classqx_1_1_qx_model.html" title="qx::QxModel&lt;T, B&gt; : all classes registered into QxOrm context can be used with Qt model/view architec...">QxModel</a> : <span class="keyword">public</span> B <span class="comment">// B type must inherit from qx::IxModel and must not define new data-members (use &#39;m_hCustomProperties&#39; or QObject dynamic properties if you need new properties in your derived class)</span>
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="classqx_1_1_qx_model.html#a5b360308fd9bdb6c6f33780b0f790221">00166</a>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt; <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structqx_1_1model__view_1_1detail_1_1_qx_nested_model.html">qx::model_view::detail::QxNestedModel</a>;
<a name="l00167"></a><a class="code" href="classqx_1_1_qx_model.html#a579a68c52fd9a00a73bdada23432306a">00167</a>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt; <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structqx_1_1model__view_1_1detail_1_1_qx_nested_model___generic.html">qx::model_view::detail::QxNestedModel_Generic</a>;
<a name="l00168"></a><a class="code" href="classqx_1_1_qx_model.html#aaf73787b2f7d986b534f72cf17628d65">00168</a>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt; <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structqx_1_1model__view_1_1detail_1_1_qx_nested_model___container.html">qx::model_view::detail::QxNestedModel_Container</a>;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="keyword">public</span>:
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">00172</a>    <span class="keyword">typedef</span> std::shared_ptr&lt;T&gt; <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>;
<a name="l00173"></a><a class="code" href="classqx_1_1_qx_model.html#a6e7ad0d9c2a0711400c4ca0a73e89a83">00173</a>    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classqx_1_1trait_1_1get__primary__key.html#a11ae75af18e7cc688dd45e73c037dc39">qx::trait::get_primary_key&lt;T&gt;::type</a> <a class="code" href="classqx_1_1_qx_model.html#a6e7ad0d9c2a0711400c4ca0a73e89a83">type_primary_key</a>;
<a name="l00174"></a><a class="code" href="classqx_1_1_qx_model.html#a5a373bed5a244d6c375cce7d3bd576c9">00174</a>    <span class="keyword">typedef</span> <a class="code" href="classqx_1_1_qx_collection.html">qx::QxCollection&lt;type_primary_key, type_ptr&gt;</a> <a class="code" href="classqx_1_1_qx_model.html#a5a373bed5a244d6c375cce7d3bd576c9">type_collection</a>;
<a name="l00175"></a><a class="code" href="classqx_1_1_qx_model.html#afdc02aaf428dc58a138bbe9bd0d739c0">00175</a>    <span class="keyword">typedef</span> B <a class="code" href="classqx_1_1_qx_model.html#afdc02aaf428dc58a138bbe9bd0d739c0">type_base_class</a>;
<a name="l00176"></a>00176 
<a name="l00177"></a><a class="code" href="classqx_1_1_qx_model.html#a300182d32beae72eb99a1e80f8f27c3da7e5514ffaa71a07fca64c1d5c763a4fc">00177</a>    <span class="keyword">enum</span> { <a class="code" href="classqx_1_1_qx_model.html#a300182d32beae72eb99a1e80f8f27c3da7e5514ffaa71a07fca64c1d5c763a4fc">qx_is_valid</a> = (<a class="code" href="structqx_1_1trait_1_1is__qx__registered.html" title="qx::trait::is_qx_registered&lt;T&gt;::value : return true if T is registered into QxOrm context to provide ...">qx::trait::is_qx_registered&lt;T&gt;::value</a> &amp;&amp; std::is_base_of&lt;qx::IxModel, B&gt;::value) };
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="keyword">protected</span>:
<a name="l00180"></a>00180 
<a name="l00181"></a><a class="code" href="classqx_1_1_qx_model.html#ae8eec9bffe924861fe284957d1a10437">00181</a>    <a class="code" href="classqx_1_1_qx_collection.html">type_collection</a> <a class="code" href="classqx_1_1_qx_model.html#ae8eec9bffe924861fe284957d1a10437" title="Model associated to a class registered into QxOrm context.">m_model</a>;                           
<a name="l00182"></a><a class="code" href="classqx_1_1_qx_model.html#aaf9e5af61ec73a2820d95dc432e4c451">00182</a>    std::shared_ptr&lt;QPair&lt;int, type_ptr&gt; &gt; <a class="code" href="classqx_1_1_qx_model.html#aaf9e5af61ec73a2820d95dc432e4c451" title="When displayed in a QTableView, this will cause an empty line awaiting user input to be displayed at ...">m_pDirtyRow</a>;  
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="keyword">public</span>:
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="classqx_1_1_qx_model.html#a83cb9b463821f3b5730036664b9e5a2c">00186</a>    <a class="code" href="classqx_1_1_qx_model.html#a83cb9b463821f3b5730036664b9e5a2c">QxModel</a>(QObject * parent = 0) : B(parent) { <a class="code" href="classqx_1_1_qx_model.html#a7bd7be77e105c23a31182e5a70d8b493">qx::QxModel&lt;T, B&gt;::init</a>(); }
<a name="l00187"></a><a class="code" href="classqx_1_1_qx_model.html#a918d261179969ed94dee10ac0bb8de3b">00187</a>    <a class="code" href="classqx_1_1_qx_model.html#a918d261179969ed94dee10ac0bb8de3b">QxModel</a>(<a class="code" href="classqx_1_1_ix_model.html" title="qx::IxModel : interface to manage Qt model/view architecture with classes registered into QxOrm conte...">qx::IxModel</a> * other, QObject * parent) : B(parent) { <a class="code" href="classqx_1_1_qx_model.html#ac41c17fe96c3f6404ab0a1027e73f47a">qx::QxModel&lt;T, B&gt;::initFrom</a>(other); }
<a name="l00188"></a><a class="code" href="classqx_1_1_qx_model.html#adc23aeafe9cfe2237d947e3bd7e71877">00188</a>    <span class="keyword">virtual</span> <a class="code" href="classqx_1_1_qx_model.html#adc23aeafe9cfe2237d947e3bd7e71877">~QxModel</a>() { ; }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="keyword">protected</span>:
<a name="l00191"></a>00191 
<a name="l00192"></a><a class="code" href="classqx_1_1_qx_model.html#a7bd7be77e105c23a31182e5a70d8b493">00192</a>    <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#a7bd7be77e105c23a31182e5a70d8b493">init</a>()
<a name="l00193"></a>00193    {
<a name="l00194"></a>00194       static_assert(<a class="code" href="classqx_1_1_qx_model.html#a300182d32beae72eb99a1e80f8f27c3da7e5514ffaa71a07fca64c1d5c763a4fc">qx_is_valid</a>, <span class="stringliteral">&quot;qx_is_valid&quot;</span>);
<a name="l00195"></a>00195       this-&gt;m_pClass = <a class="code" href="classqx_1_1_qx_class.html" title="qx::QxClass&lt;T&gt; : concrete class of type T registered into QxOrm context (this class is a singleton an...">qx::QxClass&lt;T&gt;::getSingleton</a>(); <a class="code" href="_qx_macro_8h.html#a70ab6c4ed8eb3e23107f171e0b41d612">qAssert</a>(this-&gt;m_pClass != NULL);
<a name="l00196"></a>00196       this-&gt;m_pDataMemberX = (this-&gt;m_pClass ? this-&gt;m_pClass-&gt;getDataMemberX() : NULL); <a class="code" href="_qx_macro_8h.html#a70ab6c4ed8eb3e23107f171e0b41d612">qAssert</a>(this-&gt;m_pDataMemberX != NULL);
<a name="l00197"></a>00197       this-&gt;m_pDataMemberId = (this-&gt;m_pDataMemberX ? this-&gt;m_pDataMemberX-&gt;getId_WithDaoStrategy() : NULL);
<a name="l00198"></a>00198       this-&gt;m_pCollection = (&amp; <a class="code" href="classqx_1_1_qx_model.html#ae8eec9bffe924861fe284957d1a10437" title="Model associated to a class registered into QxOrm context.">m_model</a>);
<a name="l00199"></a>00199       this-&gt;generateRoleNames();
<a name="l00200"></a>00200    }
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classqx_1_1_qx_model.html#ac41c17fe96c3f6404ab0a1027e73f47a">00202</a>    <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#ac41c17fe96c3f6404ab0a1027e73f47a">initFrom</a>(<a class="code" href="classqx_1_1_ix_model.html" title="qx::IxModel : interface to manage Qt model/view architecture with classes registered into QxOrm conte...">qx::IxModel</a> * pOther)
<a name="l00203"></a>00203    {
<a name="l00204"></a>00204       <a class="code" href="classqx_1_1_qx_model.html#a7bd7be77e105c23a31182e5a70d8b493">init</a>();
<a name="l00205"></a>00205       <a class="code" href="classqx_1_1_qx_model.html" title="qx::QxModel&lt;T, B&gt; : all classes registered into QxOrm context can be used with Qt model/view architec...">qx::QxModel&lt;T, B&gt;</a> * pOtherWrk = <span class="keyword">static_cast&lt;</span><a class="code" href="classqx_1_1_qx_model.html" title="qx::QxModel&lt;T, B&gt; : all classes registered into QxOrm context can be used with Qt model/view architec...">qx::QxModel&lt;T, B&gt;</a> *<span class="keyword">&gt;</span>(pOther);
<a name="l00206"></a>00206       m_model = pOtherWrk-&gt;<a class="code" href="classqx_1_1_qx_model.html#ae8eec9bffe924861fe284957d1a10437" title="Model associated to a class registered into QxOrm context.">m_model</a>;
<a name="l00207"></a>00207       this-&gt;m_lManualInsertIndex = pOtherWrk-&gt;m_lManualInsertIndex;
<a name="l00208"></a>00208       this-&gt;setParentModel(pOtherWrk-&gt;m_pParent);
<a name="l00209"></a>00209       <span class="keywordflow">if</span> (this-&gt;m_pParent) { this-&gt;m_eAutoUpdateDatabase = this-&gt;m_pParent-&gt;getAutoUpdateDatabase(); }
<a name="l00210"></a>00210       this-&gt;m_hCustomProperties = pOtherWrk-&gt;m_hCustomProperties;
<a name="l00211"></a>00211    }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 <span class="keyword">public</span>:
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="classqx_1_1_qx_model.html#a27c7668b2f1c876f1dfd9c8152e0d677">00215</a>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classqx_1_1_qx_model.html#a27c7668b2f1c876f1dfd9c8152e0d677">insertRows</a>(<span class="keywordtype">int</span> row, <span class="keywordtype">int</span> <a class="code" href="group___qx_cache.html#gace04518e9bf2dd2fca8449037ceffa19" title="Return the number of objects in the cache.">count</a>, <span class="keyword">const</span> QModelIndex &amp; parent = QModelIndex())
<a name="l00216"></a>00216    {
<a name="l00217"></a>00217       <span class="keywordflow">if</span> (parent.isValid()) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00218"></a>00218       <span class="keywordflow">if</span> ((row &lt; 0) || (count &lt;= 0)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00219"></a>00219       this-&gt;beginInsertRows(QModelIndex(), row, (row + count - 1));
<a name="l00220"></a>00220       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group___qx_cache.html#gace04518e9bf2dd2fca8449037ceffa19" title="Return the number of objects in the cache.">count</a>; ++i)
<a name="l00221"></a>00221       {
<a name="l00222"></a>00222          <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>(<span class="keyword">new</span> T());
<a name="l00223"></a>00223          <a class="code" href="classqx_1_1_qx_model.html#ac7ca383f20910509aa1a990c007614ab">insertItem</a>(row, pItem);
<a name="l00224"></a>00224       }
<a name="l00225"></a>00225       this-&gt;endInsertRows();
<a name="l00226"></a>00226       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00227"></a>00227    }
<a name="l00228"></a>00228 
<a name="l00229"></a><a class="code" href="classqx_1_1_qx_model.html#a9090ad2d056365fc9b59ce8f37bbc560">00229</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#a9090ad2d056365fc9b59ce8f37bbc560">sort</a>(<span class="keywordtype">int</span> column, Qt::SortOrder order = Qt::AscendingOrder)
<a name="l00230"></a>00230    {
<a name="l00231"></a>00231       <a class="code" href="classqx_1_1_ix_data_member.html" title="qx::IxDataMember : common interface for all class properties registered into QxOrm context...">IxDataMember</a> * pDataMember = this-&gt;getDataMember(column); <span class="keywordflow">if</span> (! pDataMember) { <span class="keywordflow">return</span>; }
<a name="l00232"></a>00232       m_model.<a class="code" href="classqx_1_1_qx_collection.html#a11aa16749d8cd7982519489948a4c1ae">sort</a>(<a class="code" href="structqx_1_1model__view_1_1_qx_model_row_compare.html" title="qx::QxModelRowCompare : functor used to provide sort feature for all models based on qx::IxModel inte...">qx::model_view::QxModelRowCompare&lt;typename type_collection::type_pair_key_value&gt;</a>((order == Qt::AscendingOrder), pDataMember));
<a name="l00233"></a>00233       this-&gt;raiseEvent_layoutChanged();
<a name="l00234"></a>00234    }
<a name="l00235"></a>00235 
<a name="l00236"></a><a class="code" href="classqx_1_1_qx_model.html#acb20ebafae0396b129d110447dcc1d45">00236</a>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classqx_1_1_qx_model.html#acb20ebafae0396b129d110447dcc1d45">getShowEmptyLine</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_pDirtyRow.get(); }
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="classqx_1_1_qx_model.html#ae3b1db275f84a76cb9de95f7ab60c10d">00238</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#ae3b1db275f84a76cb9de95f7ab60c10d">setShowEmptyLine</a>(<span class="keywordtype">bool</span> b)
<a name="l00239"></a>00239    {
<a name="l00240"></a>00240       <span class="keywordflow">if</span> (b == <a class="code" href="classqx_1_1_qx_model.html#acb20ebafae0396b129d110447dcc1d45">getShowEmptyLine</a>()) { <span class="keywordflow">return</span>; }
<a name="l00241"></a>00241       <span class="keywordflow">if</span> (b) { <a class="code" href="classqx_1_1_qx_model.html#a401ff12925568739ba01b2eff56378d5">addDirtyRow</a>(); <span class="keywordflow">return</span>; }
<a name="l00242"></a>00242       this-&gt;beginRemoveRows(QModelIndex(), this-&gt;rowCount(), this-&gt;rowCount());
<a name="l00243"></a>00243       m_pDirtyRow.reset();
<a name="l00244"></a>00244       this-&gt;endRemoveRows();
<a name="l00245"></a>00245    }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="keyword">public</span>:
<a name="l00248"></a>00248 
<a name="l00254"></a><a class="code" href="classqx_1_1_qx_model.html#aa5bbc6adf4e55bcac660ec7209002bb5">00254</a>    <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classqx_1_1_qx_model.html#aa5bbc6adf4e55bcac660ec7209002bb5" title="Return the number of lines in the table (database) mapped to the C++ class T (registered into QxOrm c...">qxCount</a>(<span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query = <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a>(), QSqlDatabase * pDatabase = NULL)
<a name="l00255"></a>00255    {
<a name="l00256"></a>00256       <span class="keywordflow">return</span> qx::dao::count&lt;T&gt;(query, this-&gt;database(pDatabase));
<a name="l00257"></a>00257    }
<a name="l00258"></a>00258 
<a name="l00265"></a><a class="code" href="classqx_1_1_qx_model.html#a26811b41a792a1751301419f2a4ed3f3">00265</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#aa5bbc6adf4e55bcac660ec7209002bb5" title="Return the number of lines in the table (database) mapped to the C++ class T (registered into QxOrm c...">qxCount</a>(<span class="keywordtype">long</span> &amp; lCount, <span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query = <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a>(), QSqlDatabase * pDatabase = NULL)
<a name="l00266"></a>00266    {
<a name="l00267"></a>00267       this-&gt;m_lastError = qx::dao::count&lt;T&gt;(lCount, query, this-&gt;database(pDatabase));
<a name="l00268"></a>00268       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00269"></a>00269    }
<a name="l00270"></a>00270 
<a name="l00278"></a><a class="code" href="classqx_1_1_qx_model.html#a128210d91c4e343104c30d68b187f33c">00278</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a128210d91c4e343104c30d68b187f33c" title="Clear the model and fetch an object (retrieve all its properties) of type T (registered into QxOrm co...">qxFetchById</a>(<span class="keyword">const</span> QVariant &amp; <span class="keywordtype">id</span>, <span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00279"></a>00279    {
<a name="l00280"></a>00280       this-&gt;<a class="code" href="group___qx_cache.html#ga9334ed3464961f8d21fe022ef3a91203" title="Delete all the objects in the cache.">clear</a>();
<a name="l00281"></a>00281       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>(<span class="keyword">new</span> T());
<a name="l00282"></a>00282       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { qDebug(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxFetchById()&#39; method : &#39;%s&#39;&quot;</span>, <span class="stringliteral">&quot;data member id not registered&quot;</span>); <a class="code" href="_qx_macro_8h.html#a70ab6c4ed8eb3e23107f171e0b41d612">qAssert</a>(<span class="keyword">false</span>); }
<a name="l00283"></a>00283       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { this-&gt;m_lastError = QSqlError(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxFetchById()&#39; method : &#39;data member id not registered&#39;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, QSqlError::UnknownError); <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00284"></a>00284       this-&gt;m_pDataMemberId-&gt;fromVariant(pItem.get(), id);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286       <a class="code" href="classqx_1_1_qx_model.html#a6e7ad0d9c2a0711400c4ca0a73e89a83">type_primary_key</a> primaryKey;
<a name="l00287"></a>00287       <a class="code" href="namespaceqx_1_1cvt.html#a38fbb18bd04613956f3900604f5746be">qx::cvt::from_variant</a>(<span class="keywordtype">id</span>, primaryKey);
<a name="l00288"></a>00288       this-&gt;beginInsertRows(QModelIndex(), 0, 0);
<a name="l00289"></a>00289       m_model.<a class="code" href="classqx_1_1_qx_collection.html#a0f4fa1d6008d5910103be9037f20665b" title="Add element &#39;value&#39; at the end of the list indexed by &#39;key&#39;.">insert</a>(primaryKey, pItem);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga2abaf5f2e6de160b099cf2ab74967244" title="Fetch an object t (retrieve all its properties) of type T (registered into QxOrm context) mapped to a...">qx::dao::fetch_by_id</a>((* pItem), this-&gt;database(pDatabase), this-&gt;m_lstColumns); }
<a name="l00292"></a>00292       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga37648a23475371e1b83ea2082265790d" title="Fetch an object t (retrieve all its properties) of type T (registered into QxOrm context) mapped to a...">qx::dao::fetch_by_id_with_relation</a>(relation, (* pItem), this-&gt;database(pDatabase)); }
<a name="l00293"></a>00293       this-&gt;<a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">updateShowEmptyLine</a>();
<a name="l00294"></a>00294       this-&gt;endInsertRows();
<a name="l00295"></a>00295       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00296"></a>00296    }
<a name="l00297"></a>00297 
<a name="l00304"></a><a class="code" href="classqx_1_1_qx_model.html#ad9002483ee54f7a1a0bada2457c675ee">00304</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#ad9002483ee54f7a1a0bada2457c675ee" title="Clear the model and fetch a list of objects (retrieve all elements and properties associated) of type...">qxFetchAll</a>(<span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00305"></a>00305    {
<a name="l00306"></a>00306       this-&gt;<a class="code" href="group___qx_cache.html#ga9334ed3464961f8d21fe022ef3a91203" title="Delete all the objects in the cache.">clear</a>();
<a name="l00307"></a>00307       <a class="code" href="classqx_1_1_qx_collection.html">type_collection</a> tmp;
<a name="l00308"></a>00308       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#gab7a00918917a06ad703a8d6887b94edb" title="Fetch a list of objects (retrieve all elements and properties associated) of type T (container regist...">qx::dao::fetch_all</a>(tmp, this-&gt;database(pDatabase), this-&gt;m_lstColumns); }
<a name="l00309"></a>00309       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#gad4e90031bacdd06cf278ae3ccefa9811" title="Fetch a list of objects (retrieve all elements and properties associated) of type T (container regist...">qx::dao::fetch_all_with_relation</a>(relation, tmp, this-&gt;database(pDatabase)); }
<a name="l00310"></a>00310 
<a name="l00311"></a>00311       <span class="keywordflow">if</span> (tmp.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>() &lt;= 0) { <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00312"></a>00312       this-&gt;beginResetModel();
<a name="l00313"></a>00313       m_model = tmp;
<a name="l00314"></a>00314       this-&gt;<a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">updateShowEmptyLine</a>();
<a name="l00315"></a>00315       this-&gt;endResetModel();
<a name="l00316"></a>00316       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00317"></a>00317    }
<a name="l00318"></a>00318 
<a name="l00326"></a><a class="code" href="classqx_1_1_qx_model.html#a8e854a9fdd6a804ac5a08ddafc8cd7e9">00326</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a8e854a9fdd6a804ac5a08ddafc8cd7e9" title="Clear the model and fetch a list of objects (retrieve all elements and properties associated) of type...">qxFetchByQuery</a>(<span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query, <span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00327"></a>00327    {
<a name="l00328"></a>00328       this-&gt;<a class="code" href="group___qx_cache.html#ga9334ed3464961f8d21fe022ef3a91203" title="Delete all the objects in the cache.">clear</a>();
<a name="l00329"></a>00329       <a class="code" href="classqx_1_1_qx_collection.html">type_collection</a> tmp;
<a name="l00330"></a>00330       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga98785915863d9487b0f3734b667a3c72" title="Fetch a list of objects (retrieve all elements and properties associated) of type T (container regist...">qx::dao::fetch_by_query</a>(query, tmp, this-&gt;database(pDatabase), this-&gt;m_lstColumns); }
<a name="l00331"></a>00331       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga2d8f0176ef1c7b675297637090c95129" title="Fetch a list of objects (retrieve all elements and properties associated) of type T (container regist...">qx::dao::fetch_by_query_with_relation</a>(relation, query, tmp, this-&gt;database(pDatabase)); }
<a name="l00332"></a>00332 
<a name="l00333"></a>00333       <span class="keywordflow">if</span> (tmp.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>() &lt;= 0) { <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00334"></a>00334       this-&gt;beginResetModel();
<a name="l00335"></a>00335       m_model = tmp;
<a name="l00336"></a>00336       this-&gt;<a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">updateShowEmptyLine</a>();
<a name="l00337"></a>00337       this-&gt;endResetModel();
<a name="l00338"></a>00338       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00339"></a>00339    }
<a name="l00340"></a>00340 
<a name="l00348"></a><a class="code" href="classqx_1_1_qx_model.html#a9b58948b2ec9b9f587adaf1d34d15481">00348</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a9b58948b2ec9b9f587adaf1d34d15481" title="Get an item in the model at line row and fetch all its properties mapped to a table in the database...">qxFetchRow</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00349"></a>00349    {
<a name="l00350"></a>00350       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00351"></a>00351       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga2abaf5f2e6de160b099cf2ab74967244" title="Fetch an object t (retrieve all its properties) of type T (registered into QxOrm context) mapped to a...">qx::dao::fetch_by_id</a>((* pItem), this-&gt;database(pDatabase), this-&gt;m_lstColumns); }
<a name="l00352"></a>00352       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga37648a23475371e1b83ea2082265790d" title="Fetch an object t (retrieve all its properties) of type T (registered into QxOrm context) mapped to a...">qx::dao::fetch_by_id_with_relation</a>(relation, (* pItem), this-&gt;database(pDatabase)); }
<a name="l00353"></a>00353       <span class="keywordflow">if</span> (this-&gt;m_lastError.isValid()) { <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355       QModelIndex idxTopLeft = this-&gt;index(row, 0);
<a name="l00356"></a>00356       QModelIndex idxBottomRight = this-&gt;index(row, (this-&gt;m_lstDataMember.count() - 1));
<a name="l00357"></a>00357       this-&gt;raiseEvent_dataChanged(idxTopLeft, idxBottomRight);
<a name="l00358"></a>00358       <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(row);
<a name="l00359"></a>00359       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00360"></a>00360    }
<a name="l00361"></a>00361 
<a name="l00368"></a><a class="code" href="classqx_1_1_qx_model.html#a3b333ca2ed10ada5469c6610e9dc3124">00368</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a3b333ca2ed10ada5469c6610e9dc3124" title="Insert all items in the model into database.">qxInsert</a>(<span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00369"></a>00369    {
<a name="l00370"></a>00370       <span class="keywordflow">if</span> (relation.count() &gt; 0) { this-&gt;syncAllNestedModel(relation); }
<a name="l00371"></a>00371       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#gab4400decee849f008633c52a47508995" title="Insert an element or a list of elements into database.">qx::dao::insert</a>(m_model, this-&gt;database(pDatabase)); }
<a name="l00372"></a>00372       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga82e03bc10e1fbdc3f58f1efac252f4bc" title="Insert an element and its relationships (or a list of elements + relationships) into database...">qx::dao::insert_with_relation</a>(relation, m_model, this-&gt;database(pDatabase)); }
<a name="l00373"></a>00373       <span class="keywordflow">if</span> (! this-&gt;m_lastError.isValid()) { this-&gt;<a class="code" href="classqx_1_1_qx_model.html#ad6d27c75ed0e3a8b405bc0144ca4846f">updateAllKeys</a>(); }
<a name="l00374"></a>00374       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00375"></a>00375    }
<a name="l00376"></a>00376 
<a name="l00384"></a><a class="code" href="classqx_1_1_qx_model.html#a97758c7f8572e4cc0e4cdde1657b16b8">00384</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a97758c7f8572e4cc0e4cdde1657b16b8" title="Insert an item of the model at line row into database.">qxInsertRow</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00385"></a>00385    {
<a name="l00386"></a>00386       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00387"></a>00387       <span class="keywordflow">if</span> (relation.count() &gt; 0) { this-&gt;syncNestedModel(row, relation); }
<a name="l00388"></a>00388       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#gab4400decee849f008633c52a47508995" title="Insert an element or a list of elements into database.">qx::dao::insert</a>((* pItem), this-&gt;database(pDatabase)); }
<a name="l00389"></a>00389       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga82e03bc10e1fbdc3f58f1efac252f4bc" title="Insert an element and its relationships (or a list of elements + relationships) into database...">qx::dao::insert_with_relation</a>(relation, (* pItem), this-&gt;database(pDatabase)); }
<a name="l00390"></a>00390       <span class="keywordflow">if</span> (! this-&gt;m_lastError.isValid()) { <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(row); }
<a name="l00391"></a>00391       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00392"></a>00392    }
<a name="l00393"></a>00393 
<a name="l00401"></a><a class="code" href="classqx_1_1_qx_model.html#a709c0685f9964883d54f3481a4e399d8">00401</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a709c0685f9964883d54f3481a4e399d8" title="Update all items in the model into database.">qxUpdate</a>(<span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query = <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a>(), <span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00402"></a>00402    {
<a name="l00403"></a>00403       <span class="keywordflow">if</span> (relation.count() &gt; 0) { this-&gt;syncAllNestedModel(relation); }
<a name="l00404"></a>00404       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga1bd1d32eccfb73ccd6a0e82130061fb4" title="Update an element or a list of elements into database (adding a user SQL query to the default SQL que...">qx::dao::update_by_query</a>(query, m_model, this-&gt;database(pDatabase), this-&gt;m_lstColumns); }
<a name="l00405"></a>00405       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga9fb34aec7e865b97365c91ba20e422d2" title="Update an element and its relationships (or a list of elements + relationships) into database (adding...">qx::dao::update_by_query_with_relation</a>(relation, query, m_model, this-&gt;database(pDatabase)); }
<a name="l00406"></a>00406       <span class="keywordflow">if</span> (! this-&gt;m_lastError.isValid()) { this-&gt;<a class="code" href="classqx_1_1_qx_model.html#ad6d27c75ed0e3a8b405bc0144ca4846f">updateAllKeys</a>(); }
<a name="l00407"></a>00407       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00408"></a>00408    }
<a name="l00409"></a>00409 
<a name="l00418"></a><a class="code" href="classqx_1_1_qx_model.html#a84968579fa9e2a7e250c9cde12a8432d">00418</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a84968579fa9e2a7e250c9cde12a8432d" title="Update an item of the model at line row into database.">qxUpdateRow</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query = <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a>(), <span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00419"></a>00419    {
<a name="l00420"></a>00420       <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00421"></a>00421       <span class="keywordflow">if</span> (relation.count() &gt; 0) { this-&gt;syncNestedModel(row, relation); }
<a name="l00422"></a>00422       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00423"></a>00423       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga1bd1d32eccfb73ccd6a0e82130061fb4" title="Update an element or a list of elements into database (adding a user SQL query to the default SQL que...">qx::dao::update_by_query</a>(query, (* pItem), this-&gt;database(pDatabase), this-&gt;m_lstColumns); }
<a name="l00424"></a>00424       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga9fb34aec7e865b97365c91ba20e422d2" title="Update an element and its relationships (or a list of elements + relationships) into database (adding...">qx::dao::update_by_query_with_relation</a>(relation, query, (* pItem), this-&gt;database(pDatabase)); }
<a name="l00425"></a>00425       <span class="keywordflow">if</span> (! this-&gt;m_lastError.isValid()) { <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(row); }
<a name="l00426"></a>00426       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00427"></a>00427    }
<a name="l00428"></a>00428 
<a name="l00435"></a><a class="code" href="classqx_1_1_qx_model.html#ae105750f65470c8ed375f278abd0f640">00435</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#ae105750f65470c8ed375f278abd0f640" title="Save all items (insert or update) in the model into database.">qxSave</a>(<span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00436"></a>00436    {
<a name="l00437"></a>00437       <span class="keywordflow">if</span> (relation.count() &gt; 0) { this-&gt;syncAllNestedModel(relation); }
<a name="l00438"></a>00438       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga100e9d635a4720ed9512799ba0ea519b" title="Insert (if no exist) or update (if already exist) an element or a list of elements into database...">qx::dao::save</a>(m_model, this-&gt;database(pDatabase)); }
<a name="l00439"></a>00439       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga653fbb3a886e48bca4236ea3fe6ac865" title="Insert (if no exist) or update (if already exist) an element and its relationships (or a list of elem...">qx::dao::save_with_relation</a>(relation, m_model, this-&gt;database(pDatabase)); }
<a name="l00440"></a>00440       <span class="keywordflow">if</span> (! this-&gt;m_lastError.isValid()) { this-&gt;<a class="code" href="classqx_1_1_qx_model.html#ad6d27c75ed0e3a8b405bc0144ca4846f">updateAllKeys</a>(); }
<a name="l00441"></a>00441       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00442"></a>00442    }
<a name="l00443"></a>00443 
<a name="l00451"></a><a class="code" href="classqx_1_1_qx_model.html#a99d155f46f10e19749bb1ef973358c96">00451</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a99d155f46f10e19749bb1ef973358c96" title="Save an item of the model at line row into database.">qxSaveRow</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> QStringList &amp; relation = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00452"></a>00452    {
<a name="l00453"></a>00453       <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00454"></a>00454       <span class="keywordflow">if</span> (relation.count() &gt; 0) { this-&gt;syncNestedModel(row, relation); }
<a name="l00455"></a>00455       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00456"></a>00456       <span class="keywordflow">if</span> (relation.count() == 0) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga100e9d635a4720ed9512799ba0ea519b" title="Insert (if no exist) or update (if already exist) an element or a list of elements into database...">qx::dao::save</a>((* pItem), this-&gt;database(pDatabase)); }
<a name="l00457"></a>00457       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga653fbb3a886e48bca4236ea3fe6ac865" title="Insert (if no exist) or update (if already exist) an element and its relationships (or a list of elem...">qx::dao::save_with_relation</a>(relation, (* pItem), this-&gt;database(pDatabase)); }
<a name="l00458"></a>00458       <span class="keywordflow">if</span> (! this-&gt;m_lastError.isValid()) { <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(row); }
<a name="l00459"></a>00459       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00460"></a>00460    }
<a name="l00461"></a>00461 
<a name="l00469"></a><a class="code" href="classqx_1_1_qx_model.html#ad126bcfbc88db6a2e446bf91ca3aee0a">00469</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#ad126bcfbc88db6a2e446bf91ca3aee0a" title="Used internally by qx::IxModel::setData() method with e_auto_update_on_field_change option...">qxSaveRowData</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> QStringList &amp; column = QStringList(), QSqlDatabase * pDatabase = NULL)
<a name="l00470"></a>00470    {
<a name="l00471"></a>00471       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { this-&gt;m_lastError = QSqlError(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxSaveRowData()&#39; method : &#39;data member id not registered&#39;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, QSqlError::UnknownError); <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00472"></a>00472       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00473"></a>00473       QVariant <span class="keywordtype">id</span> = this-&gt;m_pDataMemberId-&gt;toVariant(pItem.get());
<a name="l00474"></a>00474       <span class="keywordtype">bool</span> bExist = <a class="code" href="namespaceqx_1_1trait.html#a752ada47a935cfc82ffe1b17dadd6e72">qx::trait::is_valid_primary_key</a>(<span class="keywordtype">id</span>);
<a name="l00475"></a>00475       <span class="keywordflow">if</span> (bExist) { bExist = <a class="code" href="group___qx_cache.html#ga1b3b7fe7db7920493f40d0adb9c4957e" title="Return true if the cache contains an object associated with key sKey; otherwise return false...">qx::dao::exist</a>((* pItem), this-&gt;database(pDatabase)); }
<a name="l00476"></a>00476       <span class="keywordflow">if</span> (bExist) { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga690042401fc276a1929d311759b69ce2" title="Update an element or a list of elements into database.">qx::dao::update</a>((* pItem), this-&gt;database(pDatabase), column); }
<a name="l00477"></a>00477       <span class="keywordflow">else</span> { this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#gab4400decee849f008633c52a47508995" title="Insert an element or a list of elements into database.">qx::dao::insert</a>((* pItem), this-&gt;database(pDatabase)); }
<a name="l00478"></a>00478       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00479"></a>00479    }
<a name="l00480"></a>00480 
<a name="l00487"></a><a class="code" href="classqx_1_1_qx_model.html#a4b93fdcf5c45c086c305cab8283f969d">00487</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a4b93fdcf5c45c086c305cab8283f969d" title="Delete a line of a table (database) mapped to a C++ object of type T (registered into QxOrm context)...">qxDeleteById</a>(<span class="keyword">const</span> QVariant &amp; <span class="keywordtype">id</span>, QSqlDatabase * pDatabase = NULL)
<a name="l00488"></a>00488    {
<a name="l00489"></a>00489       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>(<span class="keyword">new</span> T());
<a name="l00490"></a>00490       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { qDebug(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxDeleteById()&#39; method : &#39;%s&#39;&quot;</span>, <span class="stringliteral">&quot;data member id not registered&quot;</span>); <a class="code" href="_qx_macro_8h.html#a70ab6c4ed8eb3e23107f171e0b41d612">qAssert</a>(<span class="keyword">false</span>); }
<a name="l00491"></a>00491       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { this-&gt;m_lastError = QSqlError(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxDeleteById()&#39; method : &#39;data member id not registered&#39;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, QSqlError::UnknownError); <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00492"></a>00492       this-&gt;m_pDataMemberId-&gt;fromVariant(pItem.get(), id);
<a name="l00493"></a>00493       this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga298e15a5e745ae43d99de9b4279aca3e" title="Delete a line (or list of lines) of a table (database) mapped to a C++ object of type T (registered i...">qx::dao::delete_by_id</a>((* pItem), this-&gt;database(pDatabase));
<a name="l00494"></a>00494       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00495"></a>00495    }
<a name="l00496"></a>00496 
<a name="l00502"></a><a class="code" href="classqx_1_1_qx_model.html#a763e07680bbdb6d650fcf351bdfce1a0">00502</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a763e07680bbdb6d650fcf351bdfce1a0" title="Delete all lines of a table (database) mapped to a C++ class T (registered into QxOrm context)...">qxDeleteAll</a>(QSqlDatabase * pDatabase = NULL)
<a name="l00503"></a>00503    {
<a name="l00504"></a>00504       this-&gt;m_lastError = qx::dao::delete_all&lt;T&gt;(this-&gt;database(pDatabase));
<a name="l00505"></a>00505       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00506"></a>00506    }
<a name="l00507"></a>00507 
<a name="l00514"></a><a class="code" href="classqx_1_1_qx_model.html#aba892478fecc2b581c90eefea3282ed1">00514</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#aba892478fecc2b581c90eefea3282ed1" title="Delete all lines of a table (database) mapped to a C++ class T (registered into QxOrm context) and fi...">qxDeleteByQuery</a>(<span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query, QSqlDatabase * pDatabase = NULL)
<a name="l00515"></a>00515    {
<a name="l00516"></a>00516       this-&gt;m_lastError = qx::dao::delete_by_query&lt;T&gt;(query, this-&gt;database(pDatabase));
<a name="l00517"></a>00517       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00518"></a>00518    }
<a name="l00519"></a>00519 
<a name="l00526"></a><a class="code" href="classqx_1_1_qx_model.html#a55e3685d3a3302fb50d83a26049aa53a">00526</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a55e3685d3a3302fb50d83a26049aa53a" title="Delete in database the item at line row in the model, if no error occurred then you should remove row...">qxDeleteRow</a>(<span class="keywordtype">int</span> row, QSqlDatabase * pDatabase = NULL)
<a name="l00527"></a>00527    {
<a name="l00528"></a>00528       <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00529"></a>00529       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00530"></a>00530       this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga298e15a5e745ae43d99de9b4279aca3e" title="Delete a line (or list of lines) of a table (database) mapped to a C++ object of type T (registered i...">qx::dao::delete_by_id</a>((* pItem), this-&gt;database(pDatabase));
<a name="l00531"></a>00531       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00532"></a>00532    }
<a name="l00533"></a>00533 
<a name="l00540"></a><a class="code" href="classqx_1_1_qx_model.html#a13cc9f0db19edc1c1cbd52ddf6a26eb1">00540</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a13cc9f0db19edc1c1cbd52ddf6a26eb1" title="Delete a line of a table (even if a logical delete is defined) mapped to a C++ object of type T (regi...">qxDestroyById</a>(<span class="keyword">const</span> QVariant &amp; <span class="keywordtype">id</span>, QSqlDatabase * pDatabase = NULL)
<a name="l00541"></a>00541    {
<a name="l00542"></a>00542       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>(<span class="keyword">new</span> T());
<a name="l00543"></a>00543       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { qDebug(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxDeleteById()&#39; method : &#39;%s&#39;&quot;</span>, <span class="stringliteral">&quot;data member id not registered&quot;</span>); <a class="code" href="_qx_macro_8h.html#a70ab6c4ed8eb3e23107f171e0b41d612">qAssert</a>(<span class="keyword">false</span>); }
<a name="l00544"></a>00544       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { this-&gt;m_lastError = QSqlError(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxDeleteById()&#39; method : &#39;data member id not registered&#39;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, QSqlError::UnknownError); <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00545"></a>00545       this-&gt;m_pDataMemberId-&gt;fromVariant(pItem.get(), id);
<a name="l00546"></a>00546       this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga776e2edd2da36029cddc13e9e6e366f5" title="Destroy a line (or list of lines) of a table (database) mapped to a C++ object of type T (registered ...">qx::dao::destroy_by_id</a>((* pItem), this-&gt;database(pDatabase));
<a name="l00547"></a>00547       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00548"></a>00548    }
<a name="l00549"></a>00549 
<a name="l00555"></a><a class="code" href="classqx_1_1_qx_model.html#a9f93ce8fb19a0b38ee2f6a763e6432ba">00555</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a9f93ce8fb19a0b38ee2f6a763e6432ba" title="Delete all lines of a table (even if a logical delete is defined) mapped to a C++ class T (registered...">qxDestroyAll</a>(QSqlDatabase * pDatabase = NULL)
<a name="l00556"></a>00556    {
<a name="l00557"></a>00557       this-&gt;m_lastError = qx::dao::destroy_all&lt;T&gt;(this-&gt;database(pDatabase));
<a name="l00558"></a>00558       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00559"></a>00559    }
<a name="l00560"></a>00560 
<a name="l00567"></a><a class="code" href="classqx_1_1_qx_model.html#a887c24d05e272600558382173fa05b96">00567</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#a887c24d05e272600558382173fa05b96" title="Delete all lines of a table (even if a logical delete is defined) mapped to a C++ class T (registered...">qxDestroyByQuery</a>(<span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query, QSqlDatabase * pDatabase = NULL)
<a name="l00568"></a>00568    {
<a name="l00569"></a>00569       this-&gt;m_lastError = qx::dao::destroy_by_query&lt;T&gt;(query, this-&gt;database(pDatabase));
<a name="l00570"></a>00570       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00571"></a>00571    }
<a name="l00572"></a>00572 
<a name="l00579"></a><a class="code" href="classqx_1_1_qx_model.html#ab0755c50aca2e10d6ff937539f11f08a">00579</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#ab0755c50aca2e10d6ff937539f11f08a" title="Delete in database (even if a logical delete is defined) the item at line row in the model...">qxDestroyRow</a>(<span class="keywordtype">int</span> row, QSqlDatabase * pDatabase = NULL)
<a name="l00580"></a>00580    {
<a name="l00581"></a>00581       <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00582"></a>00582       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QSqlError(); }
<a name="l00583"></a>00583       this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga776e2edd2da36029cddc13e9e6e366f5" title="Destroy a line (or list of lines) of a table (database) mapped to a C++ object of type T (registered ...">qx::dao::destroy_by_id</a>((* pItem), this-&gt;database(pDatabase));
<a name="l00584"></a>00584       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00585"></a>00585    }
<a name="l00586"></a>00586 
<a name="l00587"></a><a class="code" href="classqx_1_1_qx_model.html#ae6b16bf013e044787158e526aa5bfebf">00587</a>    <span class="keyword">virtual</span> QSqlError <a class="code" href="classqx_1_1_qx_model.html#ae6b16bf013e044787158e526aa5bfebf">qxExecuteQuery</a>(<a class="code" href="classqx_1_1_qx_sql_query.html" title="qx::QxSqlQuery : define a user SQL query added to default SQL query builded by QxOrm library...">qx::QxSqlQuery</a> &amp; query, QSqlDatabase * pDatabase = NULL)
<a name="l00588"></a>00588    {
<a name="l00589"></a>00589       this-&gt;<a class="code" href="group___qx_cache.html#ga9334ed3464961f8d21fe022ef3a91203" title="Delete all the objects in the cache.">clear</a>();
<a name="l00590"></a>00590       <a class="code" href="classqx_1_1_qx_collection.html">type_collection</a> tmp;
<a name="l00591"></a>00591       this-&gt;m_lastError = <a class="code" href="group___qx_dao.html#ga095032025fbf7aee88da96479203a077" title="Execute a custom SQL query or a stored procedure, all columns that can be mapped to the instance of t...">qx::dao::execute_query</a>(query, tmp, this-&gt;database(pDatabase));
<a name="l00592"></a>00592 
<a name="l00593"></a>00593       <span class="keywordflow">if</span> (tmp.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>() &lt;= 0) { <span class="keywordflow">return</span> this-&gt;m_lastError; }
<a name="l00594"></a>00594       this-&gt;beginResetModel();
<a name="l00595"></a>00595       m_model = tmp;
<a name="l00596"></a>00596       this-&gt;<a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">updateShowEmptyLine</a>();
<a name="l00597"></a>00597       this-&gt;endResetModel();
<a name="l00598"></a>00598       <span class="keywordflow">return</span> this-&gt;m_lastError;
<a name="l00599"></a>00599    }
<a name="l00600"></a>00600 
<a name="l00601"></a><a class="code" href="classqx_1_1_qx_model.html#a952bdc319396e6796be02e79648fb053">00601</a>    <span class="keyword">virtual</span> <a class="code" href="classqx_1_1_qx_bool.html" title="qx_bool : boolean type with code and description message when an error occured">qx_bool</a> <a class="code" href="classqx_1_1_qx_model.html#a952bdc319396e6796be02e79648fb053">qxExist</a>(<span class="keyword">const</span> QVariant &amp; <span class="keywordtype">id</span>, QSqlDatabase * pDatabase = NULL)
<a name="l00602"></a>00602    {
<a name="l00603"></a>00603       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>(<span class="keyword">new</span> T());
<a name="l00604"></a>00604       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { qDebug(<span class="stringliteral">&quot;[QxOrm] problem with &#39;qxExist()&#39; method : &#39;%s&#39;&quot;</span>, <span class="stringliteral">&quot;data member id not registered&quot;</span>); <a class="code" href="_qx_macro_8h.html#a70ab6c4ed8eb3e23107f171e0b41d612">qAssert</a>(<span class="keyword">false</span>); }
<a name="l00605"></a>00605       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId) { <span class="keywordflow">return</span> <a class="code" href="_qx_bool_8h.html#a40069a4245b458585997dadea3a86b33">qx_bool</a>(<span class="keyword">false</span>); }
<a name="l00606"></a>00606       this-&gt;m_pDataMemberId-&gt;fromVariant(pItem.get(), id);
<a name="l00607"></a>00607       <span class="keywordflow">return</span> <a class="code" href="group___qx_cache.html#ga1b3b7fe7db7920493f40d0adb9c4957e" title="Return true if the cache contains an object associated with key sKey; otherwise return false...">qx::dao::exist</a>((* pItem), this-&gt;database(pDatabase));
<a name="l00608"></a>00608    }
<a name="l00609"></a>00609 
<a name="l00610"></a><a class="code" href="classqx_1_1_qx_model.html#aa0c126f99aa26dc01a33dce4f25fc014">00610</a>    <span class="keyword">virtual</span> <a class="code" href="classqx_1_1_qx_invalid_value_x.html" title="qx::QxInvalidValueX : list of invalid values">qx::QxInvalidValueX</a> <a class="code" href="classqx_1_1_qx_model.html#aa0c126f99aa26dc01a33dce4f25fc014">qxValidate</a>(<span class="keyword">const</span> QStringList &amp; groups = QStringList())
<a name="l00611"></a>00611    {
<a name="l00612"></a>00612       <span class="keywordflow">return</span> <a class="code" href="namespaceqx.html#a09e063c1129e1035ba6ca7899ff821a4">qx::validate</a>(m_model, groups);
<a name="l00613"></a>00613    }
<a name="l00614"></a>00614 
<a name="l00615"></a><a class="code" href="classqx_1_1_qx_model.html#a688cb54e77713d9e1a5e977214247b6e">00615</a>    <span class="keyword">virtual</span> <a class="code" href="classqx_1_1_qx_invalid_value_x.html" title="qx::QxInvalidValueX : list of invalid values">qx::QxInvalidValueX</a> <a class="code" href="classqx_1_1_qx_model.html#a688cb54e77713d9e1a5e977214247b6e">qxValidateRow</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> QStringList &amp; groups = QStringList())
<a name="l00616"></a>00616    {
<a name="l00617"></a>00617       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> <a class="code" href="classqx_1_1_qx_invalid_value_x.html" title="qx::QxInvalidValueX : list of invalid values">qx::QxInvalidValueX</a>(); }
<a name="l00618"></a>00618       <span class="keywordflow">return</span> <a class="code" href="namespaceqx.html#a09e063c1129e1035ba6ca7899ff821a4">qx::validate</a>((* pItem), groups);
<a name="l00619"></a>00619    }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 <span class="keyword">protected</span>:
<a name="l00622"></a>00622 
<a name="l00623"></a><a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">00623</a>    <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(<span class="keywordtype">int</span> row)<span class="keyword"> const</span>
<a name="l00624"></a>00624 <span class="keyword">   </span>{
<a name="l00625"></a>00625       <span class="keywordflow">if</span> ((row &gt;= 0) &amp;&amp; (row &lt; m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span> m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); }
<a name="l00626"></a>00626       <span class="keywordflow">if</span> (m_pDirtyRow &amp;&amp; (m_pDirtyRow-&gt;first == row)) { <span class="keywordflow">return</span> m_pDirtyRow-&gt;second; }
<a name="l00627"></a>00627       <span class="keywordflow">return</span> <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>();
<a name="l00628"></a>00628    }
<a name="l00629"></a>00629 
<a name="l00630"></a><a class="code" href="classqx_1_1_qx_model.html#a78886fa0f71a4b38785174faa6342f00">00630</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> * <a class="code" href="classqx_1_1_qx_model.html#a78886fa0f71a4b38785174faa6342f00">getRowItemAsVoidPtr</a>(<span class="keywordtype">int</span> row)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(row).get(); }
<a name="l00631"></a>00631 
<a name="l00632"></a><a class="code" href="classqx_1_1_qx_model.html#ab6acd74f54e657308a3f6e5e5f2250b8">00632</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#ab6acd74f54e657308a3f6e5e5f2250b8">dumpModelImpl</a>(<span class="keywordtype">bool</span> bJsonFormat)<span class="keyword"> const </span>{ <a class="code" href="group___qx_serialize.html#gabbe9730199da31c65dd8ced667b99e23" title="qx::dump(const T &amp; t, bool bJsonFormat) : dump class of type T registered into QxOrm context using XM...">qx::dump</a>(m_model, bJsonFormat); }
<a name="l00633"></a>00633 
<a name="l00634"></a><a class="code" href="classqx_1_1_qx_model.html#a2a4fce8e0b8ed0b5fc35aa326ccfe428">00634</a>    <span class="keyword">virtual</span> QObject * <a class="code" href="classqx_1_1_qx_model.html#a2a4fce8e0b8ed0b5fc35aa326ccfe428">cloneModelImpl</a>()
<a name="l00635"></a>00635    {
<a name="l00636"></a>00636       <a class="code" href="classqx_1_1_qx_model.html" title="qx::QxModel&lt;T, B&gt; : all classes registered into QxOrm context can be used with Qt model/view architec...">qx::QxModel&lt;T, B&gt;</a> * pClone = <span class="keyword">new</span> <a class="code" href="classqx_1_1_qx_model.html" title="qx::QxModel&lt;T, B&gt; : all classes registered into QxOrm context can be used with Qt model/view architec...">qx::QxModel&lt;T, B&gt;</a>(<span class="keyword">this</span>, NULL);
<a name="l00637"></a>00637       std::shared_ptr&lt;type_collection&gt; pModel = <a class="code" href="group___qx_serialize.html#ga9a48a675858fa02ecc18bb029206c937" title="qx::clone(const T &amp; obj) : return a boost smart-pointer (std::shared_ptr&lt;T&gt;) of a new instance of typ...">qx::clone</a>(pClone-&gt;<a class="code" href="classqx_1_1_qx_model.html#ae8eec9bffe924861fe284957d1a10437" title="Model associated to a class registered into QxOrm context.">m_model</a>);
<a name="l00638"></a>00638       <span class="keywordflow">if</span> (pModel) { pClone-&gt;<a class="code" href="classqx_1_1_qx_model.html#ae8eec9bffe924861fe284957d1a10437" title="Model associated to a class registered into QxOrm context.">m_model</a> = (* pModel); }
<a name="l00639"></a>00639       <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>QObject *<span class="keyword">&gt;</span>(pClone);
<a name="l00640"></a>00640    }
<a name="l00641"></a>00641 
<a name="l00642"></a><a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">00642</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">updateShowEmptyLine</a>() { <span class="keywordflow">if</span> (m_pDirtyRow) { m_pDirtyRow-&gt;first = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>(); } }
<a name="l00643"></a>00643 
<a name="l00644"></a><a class="code" href="classqx_1_1_qx_model.html#a98d6ce09bef2d0e49b6095421b4dbcf4">00644</a>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classqx_1_1_qx_model.html#a98d6ce09bef2d0e49b6095421b4dbcf4">isDirtyRow</a>(<span class="keywordtype">int</span> row)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_pDirtyRow &amp;&amp; (m_pDirtyRow-&gt;first == row)); }
<a name="l00645"></a>00645 
<a name="l00646"></a><a class="code" href="classqx_1_1_qx_model.html#a7b4a862a1c0b165aa9178e14cf40663a">00646</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#a7b4a862a1c0b165aa9178e14cf40663a">insertDirtyRowToModel</a>()
<a name="l00647"></a>00647    {
<a name="l00648"></a>00648       <span class="keywordflow">if</span> (! m_pDirtyRow) { <span class="keywordflow">return</span>; }
<a name="l00649"></a>00649       <span class="keywordtype">int</span> row = m_pDirtyRow-&gt;first;
<a name="l00650"></a>00650       <a class="code" href="classqx_1_1_qx_model.html#ac7ca383f20910509aa1a990c007614ab">insertItem</a>(row, m_pDirtyRow-&gt;second);
<a name="l00651"></a>00651       <span class="keywordflow">if</span> (this-&gt;m_pParent) { this-&gt;m_pParent-&gt;saveChildRelations(<span class="keyword">this</span>); }
<a name="l00652"></a>00652       <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(row);
<a name="l00653"></a>00653       <a class="code" href="classqx_1_1_qx_model.html#a401ff12925568739ba01b2eff56378d5">addDirtyRow</a>();
<a name="l00654"></a>00654    }
<a name="l00655"></a>00655 
<a name="l00656"></a><a class="code" href="classqx_1_1_qx_model.html#a401ff12925568739ba01b2eff56378d5">00656</a>    <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#a401ff12925568739ba01b2eff56378d5">addDirtyRow</a>()
<a name="l00657"></a>00657    {
<a name="l00658"></a>00658       this-&gt;beginInsertRows(QModelIndex(), m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>(), m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>());
<a name="l00659"></a>00659       m_pDirtyRow.reset(<span class="keyword">new</span> QPair&lt;int, type_ptr&gt;(m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>(), <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>(<span class="keyword">new</span> T())));
<a name="l00660"></a>00660       <a class="code" href="classqx_1_1_ix_sql_relation.html" title="qx::IxSqlRelation : common interface for all relationships defined between 2 classes (or between 2 ta...">IxSqlRelation</a> * pRelationParent = (this-&gt;m_pDataMemberRelationToParent ? this-&gt;m_pDataMemberRelationToParent-&gt;getSqlRelation() : NULL);
<a name="l00661"></a>00661       <a class="code" href="classqx_1_1_ix_sql_relation.html#a441efa61172fbe9986756e69693c60c1">IxSqlRelation::relation_type</a> eRelationParentType = (pRelationParent ? pRelationParent-&gt;<a class="code" href="classqx_1_1_ix_sql_relation.html#ab0b7ecdeb5767474394c156caa103d9f">getRelationType</a>() : <a class="code" href="classqx_1_1_ix_sql_relation.html#a441efa61172fbe9986756e69693c60c1ae8fc75a8dcb302099cac70b8aff82056">IxSqlRelation::no_relation</a>);
<a name="l00662"></a>00662       <span class="keywordflow">if</span> (this-&gt;m_pParent &amp;&amp; ((eRelationParentType == <a class="code" href="classqx_1_1_ix_sql_relation.html#a441efa61172fbe9986756e69693c60c1a82c35898d56b6560a90752ef529860fd">IxSqlRelation::many_to_many</a>) || (eRelationParentType == <a class="code" href="classqx_1_1_ix_sql_relation.html#a441efa61172fbe9986756e69693c60c1a99d9333a6bbde039e5de83a32dba456e">IxSqlRelation::many_to_one</a>)))
<a name="l00663"></a>00663       { this-&gt;m_pDataMemberRelationToParent-&gt;fromVariant(m_pDirtyRow-&gt;second.get(), this-&gt;m_pParent-&gt;getIdFromChild(<span class="keyword">this</span>)); }
<a name="l00664"></a>00664       this-&gt;endInsertRows();
<a name="l00665"></a>00665    }
<a name="l00666"></a>00666 
<a name="l00667"></a><a class="code" href="classqx_1_1_qx_model.html#ac7ca383f20910509aa1a990c007614ab">00667</a>    <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#ac7ca383f20910509aa1a990c007614ab">insertItem</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> &amp; pItem)
<a name="l00668"></a>00668    {
<a name="l00669"></a>00669       <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span>; }
<a name="l00670"></a>00670       <a class="code" href="classqx_1_1_qx_model.html#a6e7ad0d9c2a0711400c4ca0a73e89a83">type_primary_key</a> primaryKey;
<a name="l00671"></a>00671       this-&gt;m_lManualInsertIndex = (this-&gt;m_lManualInsertIndex - 1);
<a name="l00672"></a>00672       QVariant vNewId(static_cast&lt;qlonglong&gt;(this-&gt;m_lManualInsertIndex));
<a name="l00673"></a>00673       <a class="code" href="namespaceqx_1_1cvt.html#a38fbb18bd04613956f3900604f5746be">qx::cvt::from_variant</a>(vNewId, primaryKey);
<a name="l00674"></a>00674       m_model.<a class="code" href="classqx_1_1_qx_collection.html#a0f4fa1d6008d5910103be9037f20665b" title="Add element &#39;value&#39; at the end of the list indexed by &#39;key&#39;.">insert</a>(row, primaryKey, pItem);
<a name="l00675"></a>00675       this-&gt;<a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">updateShowEmptyLine</a>();
<a name="l00676"></a>00676    }
<a name="l00677"></a>00677 
<a name="l00678"></a><a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">00678</a>    <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(<span class="keywordtype">int</span> row)
<a name="l00679"></a>00679    {
<a name="l00680"></a>00680       <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span>; }
<a name="l00681"></a>00681       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); <span class="keywordflow">if</span> (! pItem || ! this-&gt;m_pDataMemberId) { <span class="keywordflow">return</span>; }
<a name="l00682"></a>00682       <a class="code" href="classqx_1_1_qx_model.html#a6e7ad0d9c2a0711400c4ca0a73e89a83">type_primary_key</a> currPrimaryKey = m_model.<a class="code" href="classqx_1_1_qx_collection.html#a416faccd5e60a423a3d594eef2a3f99c" title="Return the key associated with the element at index position &#39;index&#39;.">getKeyByIndex</a>(row);
<a name="l00683"></a>00683       QVariant vCurrPrimaryKey = <a class="code" href="namespaceqx_1_1cvt.html#a54d0380e07b395f2d7d5c8eb3791f307">qx::cvt::to_variant</a>(currPrimaryKey);
<a name="l00684"></a>00684       QVariant vNextPrimaryKey = this-&gt;m_pDataMemberId-&gt;toVariant(pItem.get());
<a name="l00685"></a>00685       <span class="keywordflow">if</span> ((vCurrPrimaryKey == vNextPrimaryKey) || (! vNextPrimaryKey.isValid())) { <span class="keywordflow">return</span>; }
<a name="l00686"></a>00686       <span class="keywordflow">if</span> (! <a class="code" href="namespaceqx_1_1trait.html#a752ada47a935cfc82ffe1b17dadd6e72">qx::trait::is_valid_primary_key</a>(vNextPrimaryKey)) { <span class="keywordflow">return</span>; }
<a name="l00687"></a>00687       <a class="code" href="classqx_1_1_qx_model.html#a6e7ad0d9c2a0711400c4ca0a73e89a83">type_primary_key</a> updatedPrimaryKey;
<a name="l00688"></a>00688       <a class="code" href="namespaceqx_1_1cvt.html#a38fbb18bd04613956f3900604f5746be">qx::cvt::from_variant</a>(vNextPrimaryKey, updatedPrimaryKey);
<a name="l00689"></a>00689       <span class="keywordflow">if</span> (m_model.<a class="code" href="classqx_1_1_qx_collection.html#a276ed91a7453196b87d027f91ef7ff21" title="Return &#39;true&#39; if the list contains an occurrence of &#39;key&#39;, otherwise return &#39;false&#39; (same as &#39;contain...">exist</a>(updatedPrimaryKey)) { <span class="keywordflow">return</span>; }
<a name="l00690"></a>00690       m_model.<a class="code" href="classqx_1_1_qx_collection.html#ad4d8541e983e15c660d7162bf502e9df" title="Remove the item at index position &#39;index&#39;.">removeByIndex</a>(row);
<a name="l00691"></a>00691       m_model.<a class="code" href="classqx_1_1_qx_collection.html#a0f4fa1d6008d5910103be9037f20665b" title="Add element &#39;value&#39; at the end of the list indexed by &#39;key&#39;.">insert</a>(row, updatedPrimaryKey, pItem);
<a name="l00692"></a>00692    }
<a name="l00693"></a>00693 
<a name="l00694"></a><a class="code" href="classqx_1_1_qx_model.html#ad6d27c75ed0e3a8b405bc0144ca4846f">00694</a>    <span class="keywordtype">void</span> <a class="code" href="classqx_1_1_qx_model.html#ad6d27c75ed0e3a8b405bc0144ca4846f">updateAllKeys</a>()
<a name="l00695"></a>00695    {
<a name="l00696"></a>00696       <span class="keywordflow">for</span> (<span class="keywordtype">long</span> l = 0; l &lt; m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>(); l++)
<a name="l00697"></a>00697       { <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(l); }
<a name="l00698"></a>00698    }
<a name="l00699"></a>00699 
<a name="l00700"></a>00700 <span class="keyword">protected</span>:
<a name="l00701"></a>00701 
<a name="l00702"></a>00702 <span class="preprocessor">#ifndef _QX_NO_JSON</span>
<a name="l00703"></a>00703 <span class="preprocessor"></span>
<a name="l00704"></a><a class="code" href="classqx_1_1_qx_model.html#a48820e1cd2085bb610d9151d6cab5280">00704</a>    <span class="keyword">virtual</span> QString <a class="code" href="classqx_1_1_qx_model.html#a48820e1cd2085bb610d9151d6cab5280">toJson_Helper</a>(<span class="keywordtype">int</span> row)<span class="keyword"> const</span>
<a name="l00705"></a>00705 <span class="keyword">   </span>{
<a name="l00706"></a>00706       <span class="keywordflow">if</span> (row == -1) { <span class="keywordflow">return</span> <a class="code" href="namespaceqx_1_1cvt.html#a7411faf9b027f9f4cfbd8018c8df6b6e">qx::serialization::json::to_string</a>(m_model); }
<a name="l00707"></a>00707       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QString(); }
<a name="l00708"></a>00708       <span class="keywordflow">return</span> <a class="code" href="namespaceqx_1_1cvt.html#a7411faf9b027f9f4cfbd8018c8df6b6e">qx::serialization::json::to_string</a>(* pItem);
<a name="l00709"></a>00709    }
<a name="l00710"></a>00710 
<a name="l00711"></a><a class="code" href="classqx_1_1_qx_model.html#a3e9ce28e5a94b05607e9593b6ebe5009">00711</a>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classqx_1_1_qx_model.html#a3e9ce28e5a94b05607e9593b6ebe5009">fromJson_Helper</a>(<span class="keyword">const</span> QString &amp; json, <span class="keywordtype">int</span> row)
<a name="l00712"></a>00712    {
<a name="l00713"></a>00713       <span class="keywordflow">if</span> (row == -1)
<a name="l00714"></a>00714       {
<a name="l00715"></a>00715          this-&gt;<a class="code" href="group___qx_cache.html#ga9334ed3464961f8d21fe022ef3a91203" title="Delete all the objects in the cache.">clear</a>();
<a name="l00716"></a>00716          <a class="code" href="classqx_1_1_qx_collection.html">type_collection</a> tmp;
<a name="l00717"></a>00717          <span class="keywordflow">if</span> (! <a class="code" href="namespaceqx_1_1serialization_1_1json.html#a0f6759fcc33673f25ef5b6f4dc7fcc76">qx::serialization::json::from_string</a>(tmp, json)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00718"></a>00718          this-&gt;beginResetModel();
<a name="l00719"></a>00719          m_model = tmp;
<a name="l00720"></a>00720          this-&gt;<a class="code" href="classqx_1_1_qx_model.html#a2a9af537873d31a16bf756d45344f8a8">updateShowEmptyLine</a>();
<a name="l00721"></a>00721          this-&gt;endResetModel();
<a name="l00722"></a>00722          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00723"></a>00723       }
<a name="l00724"></a>00724 
<a name="l00725"></a>00725       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = <a class="code" href="classqx_1_1_qx_model.html#a428988a98dd989a4b8b20358dc4eade3">getRowItemAt</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00726"></a>00726       <span class="keywordflow">if</span> (! <a class="code" href="namespaceqx_1_1serialization_1_1json.html#a0f6759fcc33673f25ef5b6f4dc7fcc76">qx::serialization::json::from_string</a>((* pItem), json)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00727"></a>00727 
<a name="l00728"></a>00728       QModelIndex idxTopLeft = this-&gt;index(row, 0);
<a name="l00729"></a>00729       QModelIndex idxBottomRight = this-&gt;index(row, (this-&gt;m_lstDataMember.count() - 1));
<a name="l00730"></a>00730       this-&gt;raiseEvent_dataChanged(idxTopLeft, idxBottomRight);
<a name="l00731"></a>00731       <a class="code" href="classqx_1_1_qx_model.html#a2d85a5ee206ee539aeda9109fbef713a">updateKey</a>(row);
<a name="l00732"></a>00732       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00733"></a>00733    }
<a name="l00734"></a>00734 
<a name="l00735"></a><a class="code" href="classqx_1_1_qx_model.html#a6b396a981528942677d460b7a80ef84b">00735</a>    <span class="keyword">virtual</span> QVariant <a class="code" href="classqx_1_1_qx_model.html#a6b396a981528942677d460b7a80ef84b">getRelationshipValues_Helper</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> QString &amp; relation, <span class="keywordtype">bool</span> bLoadFromDatabase, <span class="keyword">const</span> QString &amp; sAppendRelations)
<a name="l00736"></a>00736    {
<a name="l00737"></a>00737       <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span> QVariant(); }
<a name="l00738"></a>00738       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId || ! this-&gt;m_pDataMemberX || ! this-&gt;m_pDataMemberX-&gt;exist(relation)) { <span class="keywordflow">return</span> QVariant(); }
<a name="l00739"></a>00739       <a class="code" href="classqx_1_1_ix_data_member.html" title="qx::IxDataMember : common interface for all class properties registered into QxOrm context...">IxDataMember</a> * pDataMember = this-&gt;m_pDataMemberX-&gt;get_WithDaoStrategy(relation); <span class="keywordflow">if</span> (! pDataMember) { <span class="keywordflow">return</span> QVariant(); }
<a name="l00740"></a>00740       <a class="code" href="classqx_1_1_ix_sql_relation.html" title="qx::IxSqlRelation : common interface for all relationships defined between 2 classes (or between 2 ta...">IxSqlRelation</a> * pRelation = (pDataMember-&gt;<a class="code" href="classqx_1_1_ix_data_member.html#abcfa16c3cc3ae21faa0a686c18c84f57">hasSqlRelation</a>() ? pDataMember-&gt;<a class="code" href="classqx_1_1_ix_data_member.html#a6300fd163bce788f01ab70284d48230a">getSqlRelation</a>() : NULL); <span class="keywordflow">if</span> (! pRelation) { <span class="keywordflow">return</span> QVariant(); }
<a name="l00741"></a>00741       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> QVariant(); }
<a name="l00742"></a>00742       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItemTemp = pItem;
<a name="l00743"></a>00743 
<a name="l00744"></a>00744       <span class="keywordflow">if</span> (bLoadFromDatabase)
<a name="l00745"></a>00745       {
<a name="l00746"></a>00746          QString sRelation = relation;
<a name="l00747"></a>00747          <span class="keywordflow">if</span> (! sAppendRelations.isEmpty() &amp;&amp; ! sAppendRelations.startsWith(<span class="stringliteral">&quot;-&gt;&quot;</span>) &amp;&amp; ! sAppendRelations.startsWith(<span class="stringliteral">&quot;&gt;&gt;&quot;</span>)) { sRelation += <span class="stringliteral">&quot;-&gt;&quot;</span> + sAppendRelations; }
<a name="l00748"></a>00748          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! sAppendRelations.isEmpty()) { sRelation += sAppendRelations; }
<a name="l00749"></a>00749          pItemTemp = <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a>(<span class="keyword">new</span> T());
<a name="l00750"></a>00750          QVariant <span class="keywordtype">id</span> = this-&gt;m_pDataMemberId-&gt;toVariant(pItem.get());
<a name="l00751"></a>00751          this-&gt;m_pDataMemberId-&gt;fromVariant(pItemTemp.get(), id);
<a name="l00752"></a>00752          QSqlError daoError = <a class="code" href="group___qx_dao.html#ga37648a23475371e1b83ea2082265790d" title="Fetch an object t (retrieve all its properties) of type T (registered into QxOrm context) mapped to a...">qx::dao::fetch_by_id_with_relation</a>(sRelation, (* pItemTemp));
<a name="l00753"></a>00753          <span class="keywordflow">if</span> (daoError.isValid()) { <span class="keywordflow">return</span> QVariant(); }
<a name="l00754"></a>00754       }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756       QJsonValue json = pDataMember-&gt;<a class="code" href="classqx_1_1_ix_data_member.html#a6d0a637cfb402963a06177729a2cdc50">toJson</a>(pItemTemp.get()); <span class="keywordflow">if</span> (json.isNull()) { <span class="keywordflow">return</span> QVariant(); }
<a name="l00757"></a>00757       <span class="keywordflow">if</span> (json.isArray()) { <span class="keywordflow">return</span> json.toArray().toVariantList(); }
<a name="l00758"></a>00758       <span class="keywordflow">return</span> json.toObject().toVariantMap();
<a name="l00759"></a>00759    }
<a name="l00760"></a>00760 
<a name="l00761"></a><a class="code" href="classqx_1_1_qx_model.html#a8f97ac2a9dcef2a97533afc3f126a539">00761</a>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classqx_1_1_qx_model.html#a8f97ac2a9dcef2a97533afc3f126a539">setRelationshipValues_Helper</a>(<span class="keywordtype">int</span> row, <span class="keyword">const</span> QString &amp; relation, <span class="keyword">const</span> QVariant &amp; values)
<a name="l00762"></a>00762    {
<a name="l00763"></a>00763       <span class="keywordflow">if</span> ((row &lt; 0) || (row &gt;= m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab8f0528865494102febab56031988a9a" title="Return the number of items in the list (same as &#39;size()&#39;)">count</a>())) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00764"></a>00764       <span class="keywordflow">if</span> ((values.type() != QVariant::List) &amp;&amp; (values.type() != QVariant::Map)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00765"></a>00765       <span class="keywordflow">if</span> (! this-&gt;m_pDataMemberId || ! this-&gt;m_pDataMemberX || ! this-&gt;m_pDataMemberX-&gt;exist(relation)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00766"></a>00766       <a class="code" href="classqx_1_1_ix_data_member.html" title="qx::IxDataMember : common interface for all class properties registered into QxOrm context...">IxDataMember</a> * pDataMember = this-&gt;m_pDataMemberX-&gt;get_WithDaoStrategy(relation); <span class="keywordflow">if</span> (! pDataMember) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00767"></a>00767       <a class="code" href="classqx_1_1_ix_sql_relation.html" title="qx::IxSqlRelation : common interface for all relationships defined between 2 classes (or between 2 ta...">IxSqlRelation</a> * pRelation = (pDataMember-&gt;<a class="code" href="classqx_1_1_ix_data_member.html#abcfa16c3cc3ae21faa0a686c18c84f57">hasSqlRelation</a>() ? pDataMember-&gt;<a class="code" href="classqx_1_1_ix_data_member.html#a6300fd163bce788f01ab70284d48230a">getSqlRelation</a>() : NULL); <span class="keywordflow">if</span> (! pRelation) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00768"></a>00768       <a class="code" href="classqx_1_1_qx_model.html#abd55fe3eef63a7c1e651cd6197faa932">type_ptr</a> pItem = m_model.<a class="code" href="classqx_1_1_qx_collection.html#ab20d863744dee2eac0752757e027e8be" title="Return the item at index position &#39;index&#39;.">getByIndex</a>(row); <span class="keywordflow">if</span> (! pItem) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00769"></a>00769 
<a name="l00770"></a>00770       QJsonValue json;
<a name="l00771"></a>00771       <span class="keywordflow">if</span> (values.type() == QVariant::List) { json = QJsonArray::fromVariantList(values.toList()); }
<a name="l00772"></a>00772       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values.type() == QVariant::Map) { json = QJsonObject::fromVariantMap(values.toMap()); }
<a name="l00773"></a>00773       <span class="keywordflow">if</span> (! pDataMember-&gt;<a class="code" href="classqx_1_1_ix_data_member.html#a10480882fc70363db63c8d47942fe6a3">fromJson</a>(pItem.get(), json)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00774"></a>00774 
<a name="l00775"></a>00775       QModelIndex idxTopLeft = this-&gt;index(row, 0);
<a name="l00776"></a>00776       QModelIndex idxBottomRight = this-&gt;index(row, (this-&gt;m_lstDataMember.count() - 1));
<a name="l00777"></a>00777       this-&gt;raiseEvent_dataChanged(idxTopLeft, idxBottomRight);
<a name="l00778"></a>00778       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00779"></a>00779    }
<a name="l00780"></a>00780 
<a name="l00781"></a>00781 <span class="preprocessor">#endif // _QX_NO_JSON</span>
<a name="l00782"></a>00782 <span class="preprocessor"></span>
<a name="l00783"></a>00783 };
<a name="l00784"></a>00784 
<a name="l00785"></a>00785 } <span class="comment">// namespace qx</span>
<a name="l00786"></a>00786 
<a name="l00787"></a>00787 <span class="preprocessor">#endif // _QX_MODEL_H_</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_qx_model_8h.html">QxModel.h</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Sat Jun 3 2017 15:17:14 for QxOrm by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
